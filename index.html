<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Importar Reporte Bitácora</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; }
textarea { width:100%; height:200px; }
table { border-collapse: collapse; margin: 20px 0; }
th, td { border: 1px solid #ccc; padding: 4px 8px; }
</style>
</head>
<body>
<h1>Importar Reporte Bitácora</h1>
<p>Pega el texto del reporte en el área inferior y presiona "Procesar" para generar las tablas.</p>
<textarea id="input"></textarea><br>
<button onclick="procesar()">Procesar</button>
<div id="output"></div>
<script>
function procesar() {
  const text = document.getElementById('input').value;
  const lines = text.split(/\r?\n/);
  const output = document.getElementById('output');
  output.innerHTML = '';
  let tableLines = [];
  function flushTable() {
    if (tableLines.length) {
      const table = document.createElement('table');
      const headerCells = tableLines[0].replace(/^\||\|$/g, '').split('|').map(c => c.trim());
      const thead = document.createElement('thead');
      const trh = document.createElement('tr');
      headerCells.forEach(c => { const th = document.createElement('th'); th.textContent = c; trh.appendChild(th); });
      thead.appendChild(trh);
      table.appendChild(thead);
      const tbody = document.createElement('tbody');
      for (let i = 1; i < tableLines.length; i++) {
        const row = tableLines[i].replace(/^\||\|$/g, '').split('|').map(c => c.trim());
        if (row.length === 1 && row[0].match(/^[-]+$/)) continue; // separator
        const tr = document.createElement('tr');
        row.forEach(c => { const td = document.createElement('td'); td.textContent = c; tr.appendChild(td); });
        tbody.appendChild(tr);
      }
      table.appendChild(tbody);
      output.appendChild(table);
      tableLines = [];
    }
  }
  for (const line of lines) {
    if (line.trim().startsWith('|')) {
      tableLines.push(line);
    } else {
      flushTable();
      if (line.trim()) {
        const p = document.createElement('p');
        p.textContent = line;
        output.appendChild(p);
      }
    }
  }
  flushTable();
}
</script>
</body>
</html>
